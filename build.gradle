buildscript {
    ext.spek_version = "1.1.5"
    ext.kotlin_test = "2.0.7"
}

plugins {
    id "org.jetbrains.kotlin.plugin.spring" version "1.1.61" apply false
    id "org.jetbrains.kotlin.jvm" version "1.1.61" apply false
    id "org.junit.platform.gradle.plugin" version "1.0.2" apply false
}

allprojects {
    apply plugin: 'kotlin'
    group = 'com.tcibinan'
    version = '1.0-SNAPSHOT'

    repositories {
        mavenCentral()
        jcenter()
        maven { url "http://dl.bintray.com/jetbrains/spek" }
    }

    dependencies {
        compile "org.jetbrains.kotlin:kotlin-stdlib-jre8"
        compile "org.jetbrains.kotlin:kotlin-reflect"

        testCompile "org.jetbrains.kotlin:kotlin-test"

        testCompile "io.kotlintest:kotlintest:$kotlin_test"

        testCompile "org.jetbrains.spek:spek-api:$spek_version"
        testCompile "org.jetbrains.spek:spek-data-driven-extension:$spek_version"
        testCompile "org.jetbrains.spek:spek-subject-extension:$spek_version"
        testRuntime "org.jetbrains.spek:spek-junit-platform-engine:$spek_version"
    }

    compileKotlin { kotlinOptions.jvmTarget = "1.8" }
    compileTestKotlin { kotlinOptions.jvmTarget = "1.8" }
}

task stage(dependsOn: ['clean', 'build'])