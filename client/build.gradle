task copyHtml(type: Copy) {
    from "src/main/html"
    into "$buildDir/dist"
}

task copyStyles(type: Copy) {
    from "src/main/styles"
    into "$buildDir/dist/styles"
}

task copyOtherResources(type: Copy) {
    from "src/main/resources"
    into "$buildDir/dist"
}

task webpack(type: Exec) {
    dependsOn "copyHtml"
    dependsOn "copyStyles"
    dependsOn "copyOtherResources"

    inputs.file("webpack.config.js")
    inputs.dir("src/main")
    outputs.dir("$buildDir/dist")

    commandLine "$projectDir/node_modules/.bin/webpack",
            "--env.REST_URL=http://localhost:8081/api/flaxo/",
            "$projectDir/src/main/js/index.js",
            "-o", "$buildDir/dist/flaxo.bundle.js"
}